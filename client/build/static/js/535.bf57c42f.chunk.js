"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[535],{5535:function(e,t,n){n.r(t),n.d(t,{default:function(){return v}});var r=n(5861),a=n(4942),s=n(9439),c=n(1413);function i(e){var t,n,r,a=2;for("undefined"!=typeof Symbol&&(n=Symbol.asyncIterator,r=Symbol.iterator);a--;){if(n&&null!=(t=e[n]))return t.call(e);if(r&&null!=(t=e[r]))return new o(t.call(e));n="@@asyncIterator",r="@@iterator"}throw new TypeError("Object is not async iterable")}function o(e){function t(e){if(Object(e)!==e)return Promise.reject(new TypeError(e+" is not an object."));var t=e.done;return Promise.resolve(e.value).then((function(e){return{value:e,done:t}}))}return o=function(e){this.s=e,this.n=e.next},o.prototype={s:null,n:null,next:function(){return t(this.n.apply(this.s,arguments))},return:function(e){var n=this.s.return;return void 0===n?Promise.resolve({value:e,done:!0}):t(n.apply(this.s,arguments))},throw:function(e){var n=this.s.return;return void 0===n?Promise.reject(e):t(n.apply(this.s,arguments))}},new o(e)}var u=n(7757),l=n.n(u),p=n(2791),d=n(6030),h=n(4569),m=n.n(h),f=n(7046),x=n(7027),b=n(3504),y=n(184),g=(0,p.lazy)((function(){return Promise.all([n.e(756),n.e(958)]).then(n.bind(n,9958))}));function v(){var e=this,t={name:"",category:"",subcategory:"",selling_price:"",actual_price:"",discount:"",images:[]},n=((0,d.v9)((function(e){return(0,c.Z)({},e)})).user,(0,p.useState)([])),o=(0,s.Z)(n,2),u=o[0],h=o[1],v=(0,p.useState)(t),j=(0,s.Z)(v,2),w=j[0],N=j[1],Z=(0,p.useState)(!1),k=(0,s.Z)(Z,2),O=k[0],P=k[1],_=(0,p.useState)(!1),C=(0,s.Z)(_,2),S=C[0],D=C[1];(0,p.useEffect)((function(){(0,x.Dg)({}).then((function(e){return h(e.data)}))}),[]),(0,p.useEffect)((function(){var e=parseInt((w.actual_price-w.selling_price)*(100/w.actual_price));N((0,c.Z)((0,c.Z)({},w),{},{discount:e}))}),[w.selling_price,w.actual_price]);var I=function(e){if(N((0,c.Z)((0,c.Z)({},w),{},(0,a.Z)({},e.target.name,e.target.value))),e.target.files&&e.target.files[0])for(var t=[],n=e.target.files,r=0;r<n.length;r++){var s=new FileReader;s.onload=function(e){t.push(e.target.result),N((0,c.Z)((0,c.Z)({},w),{},{images:t}))},s.readAsDataURL(n[r])}},E=function(){var e=(0,r.Z)(l().mark((function e(t,n){var r,a,s,c,o,u;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:D(!0),r=!1,a=!1,e.prev=3,c=i(n);case 5:return e.next=7,c.next();case 7:if(!(r=!(o=e.sent).done)){e.next=13;break}u=o.value,(0,x.bL)({public_id:u.public_id}).then((function(e){return console.log(e)}));case 10:r=!1,e.next=5;break;case 13:e.next=19;break;case 15:e.prev=15,e.t0=e.catch(3),a=!0,s=e.t0;case 19:if(e.prev=19,e.prev=20,!r||null==c.return){e.next=24;break}return e.next=24,c.return();case 24:if(e.prev=24,!a){e.next=27;break}throw s;case 27:return e.finish(24);case 28:return e.finish(19);case 29:(0,x.Ir)({productId:t}).then((function(e){(0,x.Dg)({}).then((function(e){h(e.data),D(!1)}))}));case 30:case"end":return e.stop()}}),e,null,[[3,15,19,29],[20,,24,28]])})));return function(t,n){return e.apply(this,arguments)}}(),q=function(){var e=(0,r.Z)(l().mark((function e(n){var r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),P(!0),e.next=4,f.I8.currentUser.getIdToken();case 4:r=e.sent,m().post("http://localhost:8000/api/uploadimages",{images:w.images},{headers:{authtoken:r}}).then((function(e){(0,x.ry)((0,c.Z)((0,c.Z)({},w),{},{images:e.data}),r).then((function(e){N(t),(0,x.Dg)({}).then((function(e){return h(e.data)})),P(!1)}))})).catch((function(e){return console.log(e)}));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,y.jsxs)("div",{style:{display:"flex",height:"100vh"},children:[(0,y.jsx)(g,{panelName:"Products"}),(0,y.jsx)("div",{className:"verticalLine",style:{borderLeft:"1px solid #b1b1b1"}}),(0,y.jsx)("div",{className:"py-3",style:{width:"100%",paddingLeft:"1rem"},children:(0,y.jsxs)("table",{className:"table",children:[(0,y.jsx)("thead",{children:(0,y.jsxs)("tr",{children:[(0,y.jsx)("th",{className:"text-center",scope:"col",children:"Name"}),(0,y.jsx)("th",{className:"text-center",scope:"col",children:"selling price"}),(0,y.jsx)("th",{className:"text-center",scope:"col",children:"actual price"}),(0,y.jsx)("th",{className:"text-center",scope:"col",children:"dicount"}),(0,y.jsx)("th",{className:"text-center",scope:"col",children:"Edit"}),(0,y.jsx)("th",{className:"text-center",scope:"col",children:"Delete"})]})}),(0,y.jsx)("tbody",{children:u.map((function(t,n){return(0,y.jsxs)("tr",{children:[(0,y.jsx)("td",{className:"text-center",children:t.name}),(0,y.jsx)("td",{className:"text-center",children:t.selling_price}),(0,y.jsx)("td",{className:"text-center",children:t.actual_price}),(0,y.jsxs)("td",{className:"text-center",children:[t.discount,"%"]}),(0,y.jsx)("td",{className:"text-center",children:(0,y.jsx)("form",{method:"post",children:(0,y.jsx)(b.rU,{to:"/admin/editproduct/"+t.slug,style:{height:"23px"},name:"profileBtn",href:"",type:"submit",className:"btn btn-sm",children:(0,y.jsx)("span",{className:"material-icons",children:"edit"})})})}),(0,y.jsx)("td",{className:"text-center",children:(0,y.jsx)("button",{name:"deleteItem",className:"btn btn-sm",onClick:E.bind(e,t._id,t.images),disabled:S,children:S?(0,y.jsx)("div",{className:"spinner-container",children:(0,y.jsx)("div",{className:"spinner-border text-light",role:"status",children:(0,y.jsx)("span",{className:"sr-only"})})}):(0,y.jsx)("span",{className:"material-icons",children:"delete"})})})]},n)}))})]})}),(0,y.jsx)("form",{onSubmit:q,className:"m-3 d-flex flex-column align-items-center",children:(0,y.jsxs)("div",{className:"text-center",style:{border:"1px solid #c8c8c8",padding:"15px",backgroundColor:"#e0e0e0",borderRadius:"10px"},children:[(0,y.jsx)("h4",{children:"Add Product"}),(0,y.jsx)("input",{value:w.name,onChange:I,type:"text",name:"name",placeholder:"Product Name",className:"form-control shadow-none my-2",required:!0}),(0,y.jsx)("input",{value:w.category,onChange:I,type:"text",name:"category",placeholder:"category",className:"form-control shadow-none my-2",required:!0}),(0,y.jsx)("input",{value:w.subcategory,onChange:I,type:"text",name:"subcategory",placeholder:"subCategory",className:"form-control shadow-none my-2",required:!0}),(0,y.jsx)("input",{value:w.selling_price,onChange:I,type:"number",name:"selling_price",placeholder:"Selling price",className:"form-control shadow-none my-2",required:!0}),(0,y.jsx)("input",{value:w.actual_price,onChange:I,type:"number",name:"actual_price",placeholder:"Actual price",className:"form-control shadow-none my-2",required:!0}),(0,y.jsx)("input",{value:w.discount,disabled:!0,type:"number",name:"discount",placeholder:"discount",className:"form-control shadow-none my-2",required:!0}),(0,y.jsx)("input",{type:"file",onChange:I,accept:"image/*",name:"images[]",className:"product-images form-control shadow-none my-2",placeholder:"image",multiple:!0}),(0,y.jsx)("div",{className:"preview_img d-flex flex-wrap justify-content-center",style:{padding:"10px 0",width:"230px"},children:w.images.map((function(e){return(0,y.jsx)("div",{className:"img-thumbnail d-flex justify-content-center align-items-center m-1",style:{width:"100px",height:"100px"},children:(0,y.jsx)("img",{src:e,alt:"",style:{maxHeight:"100%",maxWidth:"100%",margin:"auto"}})})}))}),(0,y.jsx)("button",{type:"submit",name:"createNewCourseBtn",className:"addbtn btn btn-primary",disabled:O,children:O?(0,y.jsx)("div",{className:"spinner-container",children:(0,y.jsx)("div",{className:"spinner-border text-light",role:"status",children:(0,y.jsx)("span",{className:"sr-only"})})}):"Submit"})]})})]})}},7027:function(e,t,n){n.d(t,{ry:function(){return o},Dg:function(){return u},nM:function(){return l},bL:function(){return p},Ir:function(){return d}});var r=n(5861),a=n(7757),s=n.n(a),c=n(4569),i=n.n(c),o=function(){var e=(0,r.Z)(s().mark((function e(t,n){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i().post("".concat("http://localhost:8000/api","/product"),t,{headers:{authtoken:n}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),u=function(){var e=(0,r.Z)(s().mark((function e(t){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i().post("".concat("http://localhost:8000/api","/products"),t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),l=function(){var e=(0,r.Z)(s().mark((function e(t){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i().post("".concat("http://localhost:8000/api","/updateProduct"),t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),p=function(){var e=(0,r.Z)(s().mark((function e(t){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i().post("".concat("http://localhost:8000/api","/removeimage"),t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),d=function(){var e=(0,r.Z)(s().mark((function e(t){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i().post("".concat("http://localhost:8000/api","/deleteProduct"),t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},1413:function(e,t,n){n.d(t,{Z:function(){return s}});var r=n(4942);function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}}}]);
//# sourceMappingURL=535.bf57c42f.chunk.js.map